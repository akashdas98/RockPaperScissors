<!DOCTYPE html>

<html>
    <script>
        while(true) {
            let x = prompt('1. New Game\n2. Exit')
            if(x == 1)
                game()
            else if (x == 2)
                break
            else alert('Invalid option! Try again.')
        }
            
        function computerPlay() {
            const num = Math.floor(Math.random()*3)+1
            return  num == 1? 'Rock' : num == 2? 'Paper' : 'Sissors'
        }
        
        function playRound(computerSelection, playerSelection) {
            if(playerSelection.toLowerCase() != 'rock' &&  playerSelection.toLowerCase() != 'paper' && playerSelection.toLowerCase() != 'sissors')
                return -5
            if(computerSelection.toLowerCase() == playerSelection.toLowerCase())
                return 0
            else if(computerSelection.toLowerCase() == 'rock') {
                if(playerSelection.toLowerCase() == 'paper')
                    return 1
                else return -2
            } else if(computerSelection.toLowerCase() == 'paper') {
                if(playerSelection.toLowerCase() == 'sissors')
                    return 2
                else return -3
            } else {
                if(playerSelection.toLowerCase() == 'rock')
                    return 3
                else return -1
            }
        }

        function game() {
            let score1 = 0, score2 = 0
            for(let i = 0; i < 5; i++) {
                let result = playRound(computerPlay(), prompt('Choose your call!'))
                if(result == 1 || result == 2 || result == 3) {
                    score1++
                    alert(result == 1? 'You win this round! Paper covers rock!' : result == 2? 'You win this round! Sissors cut paper!' : 'You win this round! Rock smashes sissors!')
                } else if(result == -1 || result == -2 || result == -3) {
                    score2++
                    alert(result == -1? 'You lose this round! Sissors cut paper!' : result == -2? 'You lose this round! Rock smashes sissors!' : 'You lose this round! Paper covers rock!')
                } else if(result == -5) {
                    alert('Invalid call! Try again.')
                    i--
                } else alert('It\'s a draw!')
            }
            if(score1 > score2)
                alert(`You win! The score is ${score1} - ${score2}.`)
            else if(score1 < score2)
                alert(`You lose! The score is ${score1} - ${score2}.`)
            else alert(`It's a draw! The score is ${score1} - ${score2}.`)
        }
    </script>
</html>